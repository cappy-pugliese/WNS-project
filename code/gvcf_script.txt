#!/bin/bash
#SBATCH --job-name=GVCF
#SBATCH -N 1
#SBATCH -n 1
#SBATCH -c 1
#SBATCH --mem=5G
#SBATCH --partition=general
#SBATCH --qos=general
#SBATCH --mail-type=ALL
#SBATCH --mail-user=caprina.pugliese@uconn.edu
#SBATCH -o %x_%j.out
#SBATCH -e %x_%j.err

########### script start

hostname
date

/home/FCAM/cpugliese/wns-lab/bams

## Make .gvcf from sorted bam

INDIR=/home/FCAM/cpugliese/wns-lab/bams
OUTDIR=/home/FCAM/cpugliese/wns/02_bam2gvcf
REF=/home/FCAM/cpugliese/wns/pd_data/pd_ref/pdestructans.fasta

cd $OUTDIR

module load GATK/4.3.0.0

gatk HaplotypeCaller \
  -R $REF \
  -I $INDIR/SRR11812088.sorted.bam \
  -O SRR11812088.g.vcf.gz \
  -ERC GVCF \
  -ploidy 1

########### script end

# INDR=/home/FCAM/cpugliese/wns-lab/bams
# Pd_10.deduped.bam

# link to gatk tool info
# https://gatk.broadinstitute.org/hc/en-us/articles/9570334998171-HaplotypeCaller